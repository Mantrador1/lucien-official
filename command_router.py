# command_router.py

from memory import get_last_messages

def route_command(chat_id, command):
    if command.startswith("/start"):
        return "Ã°Å¸Å¡â‚¬ LucienX ÃŽÂµÃŽÂ½ÃŽÂµÃÂÃŽÂ³ÃŽÂ¿Ãâ‚¬ÃŽÂ¿ÃŽÂ¹ÃŽÂ®ÃŽÂ¸ÃŽÂ·ÃŽÂºÃŽÂµ. ÃŽÂ ÃŽÂµÃâ€š ÃŽÂ¼ÃŽÂ¿Ãâ€¦ ÃŽÂºÃŽÂ¬Ãâ€žÃŽÂ¹."

    if command.startswith("/help"):
        return "Ã¢â€žÂ¹Ã¯Â¸Â ÃŽâ€ÃŽÂ¹ÃŽÂ±ÃŽÂ¸ÃŽÂ­ÃÆ’ÃŽÂ¹ÃŽÂ¼ÃŽÂµÃâ€š ÃŽÂµÃŽÂ½Ãâ€žÃŽÂ¿ÃŽÂ»ÃŽÂ­Ãâ€š: /start, /help, /whoami, /recall, /reset"

    if command.startswith("/whoami"):
        return f"ÃŽâ€¢ÃŽÂ¯ÃÆ’ÃŽÂ±ÃŽÂ¹ ÃŽÂ¿ Ãâ€¡ÃÂÃŽÂ®ÃÆ’Ãâ€žÃŽÂ·Ãâ€š ÃŽÂ¼ÃŽÂµ chat_id: {chat_id}"

    if command.startswith("/recall"):
        messages = get_last_messages(chat_id)
        if not messages:
            return "Ã¢Ââ€” ÃŽâ€ÃŽÂµÃŽÂ½ ÃŽÂ¸Ãâ€¦ÃŽÂ¼ÃŽÂ¬ÃŽÂ¼ÃŽÂ±ÃŽÂ¹ Ãâ€žÃŽÂ¯Ãâ‚¬ÃŽÂ¿Ãâ€žÃŽÂ± ÃŽÂ±ÃŽÂºÃÅ’ÃŽÂ¼ÃŽÂ± ÃŽÂ±Ãâ‚¬ÃÅ’ ÃŽÂµÃÆ’ÃŽÂ­ÃŽÂ½ÃŽÂ±."
        return "Ã°Å¸Â§Â  ÃŽÂ¤ÃŽÂ± Ãâ€žÃŽÂµÃŽÂ»ÃŽÂµÃâ€¦Ãâ€žÃŽÂ±ÃŽÂ¯ÃŽÂ± ÃÆ’ÃŽÂ¿Ãâ€¦ ÃŽÂ¼ÃŽÂ·ÃŽÂ½ÃÂÃŽÂ¼ÃŽÂ±Ãâ€žÃŽÂ±:\n" + "\n".join(f"Ã¢â‚¬Â¢ {msg}" for msg in messages)

    if command.startswith("/reset"):
        return "Ã°Å¸â€â€ž ÃŽâ€” ÃŽÂ¼ÃŽÂ½ÃŽÂ®ÃŽÂ¼ÃŽÂ· ÃŽÂ¼ÃŽÂ¿Ãâ€¦ ÃŽÂ¸ÃŽÂ± ÃŽÂºÃŽÂ±ÃŽÂ¸ÃŽÂ±ÃÂÃŽÂ¹ÃÆ’Ãâ€žÃŽÂµÃŽÂ¯ (ÃÅ’Ãâ€žÃŽÂ±ÃŽÂ½ Ãâ€¦ÃŽÂ»ÃŽÂ¿Ãâ‚¬ÃŽÂ¿ÃŽÂ¹ÃŽÂ·ÃŽÂ¸ÃŽÂµÃŽÂ¯)."

    return f"Ã¢Ââ€œ ÃŽâ€ÃŽÂµÃŽÂ½ ÃŽÂºÃŽÂ±Ãâ€žÃŽÂ±ÃŽÂ»ÃŽÂ±ÃŽÂ²ÃŽÂ±ÃŽÂ¯ÃŽÂ½Ãâ€° Ãâ€žÃŽÂ·ÃŽÂ½ ÃŽÂµÃŽÂ½Ãâ€žÃŽÂ¿ÃŽÂ»ÃŽÂ®: {command}"
